# 文件管理知识点总结（完整版）

## 一、文件的基本概念
- **文件**：具有自己的文件名和相关信息（如大小、类型）
- **内容结构**
  - **逻辑结构**：逻辑上连续
  - **物理结构**：
    - 可以连续存储
    - 链式存储（非连续）
    - 索引结构（索引表方式存储多个逻辑块）
- **逻辑与物理映射关系**
  - 链表方式：逻辑块顺序不连续，物理块通过指针链接
  - 索引方式：逻辑块通过索引表找到对应物理块
- **文件信息**
  - 文件名
  - 物理地址、长度、文件块
  - **控制信息**：可读、可写、可执行
  - **使用信息**：如访问次数、创建时间（软考一般不考，但需知道存在）

## 二、目录结构
- **一级目录**：只有一个文件夹，内部文件不允许重名
- **两级目录**：根目录 + 用户目录（如“张三”、“李四”）
- **多级目录（树形目录）**：
  - 可以无限扩展
  - **三级目录只是示例**，不要被数字迷惑
  - 满足实际使用需求

## 三、操作系统文件系统区别
- **Linux**
  - 只有根目录（/），无盘符
  - 早期主要通过命令行操作文件
  - 修改权限命令：`chmod`（change mod）
- **Windows**
  - 有盘符（C、D、E 等）
  - 根据文件后缀选择打开程序（如 TXT → 记事本或第三方软件）

## 四、文件操作与写回
- 文件修改后写回磁盘
- 系统崩溃时，**目录修改影响最大**
  - 原因：目录删除或修改会影响目录下所有文件
- 文件修改顺序：
  1. 修改内容在内存
  2. 按保存写回磁盘
  3. 系统崩溃影响范围依文件类型（目录 > 文件）

## 五、路径概念
- **绝对路径**
  - 从根目录或盘符开始
  - **包含反斜杠**
  - 示例：`C:\Program Files\Flash\RWDL`
- **相对路径**
  - 从当前目录开始
  - **不包含反斜杠**
  - 示例：`WU2\F2`（当前目录在 D1）
- **全文件名**
  - 文件名 + 后缀 + **绝对路径**
  - 例题提示：选择全文件名时，必须包含绝对路径

## 六、索引文件结构
- 文件可按大小划分为多个逻辑块
- 存储方式：
  1. **连续存储**
  2. **链式存储**
  3. **索引存储**（主要考察）
- **索引类型**
  1. **直接索引**：逻辑块直接存储物理块号
  2. **一级间接索引**：索引块存储多个物理块号 → 可表示 N 个逻辑块
  3. **二级间接索引**：索引块指向一级索引块 → 可表示 N² 个逻辑块
  4. **三级间接索引**：索引块指向二级索引块 → 可表示 N³ 个逻辑块
- **逻辑块编号从 0 开始**（除非题目说明从 1 开始）
- **真题强化**
  - 索引块和数据块大小 1KB
  - 每个文件索引节点有 8 个地址：
    - 0~4：直接索引
    - 5~6：一级间接索引
    - 7：二级间接索引
  - 访问逻辑块 4 → 直接索引
  - 访问逻辑块 5 → 一级间接索引
  - 可表示最大文件长度：
    ```
    最大文件大小 = (直接索引数量 + 一级间接数量 + 二级间接数量) × 每块大小
    ```

## 七、位视图（位图）管理
- **目的**：记录磁盘物理块使用情况
- **存储单位**
  - 每个物理块对应一个比特
  - **二维数组存储**（减少空间）
    - 行 = 字
    - 列 = 格子（位）
  - 格子编号从 0 开始，字编号从 0 开始
- **公式**
  - 格子所在字编号 = 格子编号 ÷ 字长
- **示例**
  - 磁盘容量 300GB，物理块 1MB
  - 物理块数 ≈ 307200
  - 字长 32 → 位视图字数 = 307200 ÷ 32 = 9600
- 真题技巧：
  - 确认格子编号从 0 开始
  - 字编号 = 格子编号 ÷ 字长（整除取整数）

---

> **学习建议**
> - 熟悉逻辑块与物理块映射，掌握链表和索引映射区别
> - 熟练掌握直接索引、一级/二级/三级间接索引的访问方法
> - 理解路径概念，绝对路径 vs 相对路径，注意反斜杠
> - 理解位视图计算公式和二维数组存储
> - 多做真题强化逻辑块映射、索引结构和磁盘管理理解
