# 操作系统笔记：进程与同步（精简版）

> 适用于：期末考试 / 考研 / 软考  
> 关键词：进程、线程、PV 操作、互斥、同步、死锁

---

## 一、进程（Process）基础

### 1. 进程 vs 程序（必考）

| 对比项 | 程序（Program） | 进程（Process） |
|---|---|---|
| 形态 | 静态（磁盘中的代码） | 动态（运行过程） |
| 生命周期 | 无 | 有（创建 → 运行 → 消亡） |
| 是否分配资源 | 否 | 是 |
| CPU 调度对象 | 否 | 是 |

**结论：CPU 调度的是进程，不是程序**

---

### 2. 进程的组成

- 程序代码段
- 数据段
- **PCB（进程控制块）⭐**
  - 进程状态
  - 寄存器信息
  - 调度信息

---

## 二、进程 vs 线程（高频考点）

| 项目 | 进程 | 线程 |
|---|---|---|
| 英文 | Process | Thread |
| 资源分配 | 独立 | 共享进程资源 |
| 调度单位 | 间接 | **直接（执行单位）** |
| 是否共享内存 | 不共享 | 共享 |

### 共享规则（必背）

- ✅ 共享：代码段、全局变量
- ❌ 不共享：栈、局部变量、指针

**口诀**：  
> 爸爸的东西儿子能用，儿子的东西兄弟不能用

---

## 三、进程状态（核心）

### 1. 三状态模型（必考）
就绪 → 运行 → 等待（阻塞）
↑________________|


| 状态 | 说明 |
|---|---|
| 就绪 | 除 CPU 外资源齐全 |
| 运行 | 正在占用 CPU |
| 等待 | 等待 I/O 或资源 |

⚠️ **等待态不能直接到运行态**

---

### 2. 五状态模型（考过）

新增状态：
- 静止就绪
- 静止阻塞（挂起）

**挂起原因**：
- 内存不足
- 进程优先级低
- 用户或系统干预

📌 挂起 ≠ 阻塞

---

## 四、信号量与 PV 操作（难点）

### 1. 信号量（Semaphore）

- 本质：一个特殊变量
- 含义：
  - `S ≥ 0`：可用资源数
  - `S < 0`：阻塞进程数（绝对值）

---

### 2. P / V 操作（必背）

| 操作 | 含义 |
|---|---|
| P | 申请资源（S = S - 1） |
| V | 释放资源（S = S + 1） |

---

## 五、互斥（Mutual Exclusion）

### 1. 使用场景
- 打印机
- 售票系统
- 临界资源访问

### 2. 特点总结（必背）

| 项目 | 互斥 |
|---|---|
| 信号量初值 | **1（或 ≥1）** |
| PV 顺序 | **先 P 后 V** |
| 目的 | 不允许同时访问 |

**关键词**：  
> 同一时刻只允许一个进程访问

---

## 六、同步（Synchronization）

### 1. 典型问题
- 生产者 / 消费者

### 2. 特点总结（必背）

| 项目 | 同步 |
|---|---|
| 信号量初值 | **0** |
| PV 顺序 | **先 V 后 P** |
| 目的 | 控制执行顺序 |

**判断技巧**：
- 等结果 → 同步
- 抢资源 → 互斥

---

## 七、前驱图与 PV 操作（高频）

### 核心规律（必背）

- 一条箭头 = 一个信号量
- 前驱进程 → **P 操作**
- 后继进程 → **V 操作**
- 同步信号量初值 = 0

### 解题模板

- 有几条箭头 → 几个信号量
- 有几个前驱 → 几个 P
- 有几个后继 → 几个 V

📌 不纠结信号量名称，只数 P / V 个数

---

## 八、死锁（Deadlock）

### 定义（必背）

> 多个进程相互等待对方占有的资源，且都不释放

### 四个必要条件（必考）

1. 互斥
2. 请求并保持
3. 不可剥夺
4. 循环等待

---

## 九、终极速记版（考前 5 分钟）
进程：资源分配单位
线程：执行单位

互斥：S ≥ 1，先 P 后 V
同步：S = 0，先 V 后 P

等待态不能直接运行
前驱图：箭头 = 信号量

